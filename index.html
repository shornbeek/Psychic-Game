<!DOCTYPE html>
<html lang="en-us">

<head>
  <title>The Pyschic Game</title>
  <link rel ="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <!-- <link rel="stylesheet" type="text/css" href="assets/css/style.css"> -->
</head>


  <div class="header">
      <h1>Psychic Game.</h1>
      <h3>Press a letter to start playing!</h3>
  </div>

  <div class="container">
   
        <div>  Wins: </div>
        <div id="winCount"> 0</div>
      
        <div> Losses: </div>
        <div id="lossCount"> 0</div>
   
        <div> Computers Choice: </div>
        <div id="computerchoice-text"> 0 </div>
       
        <div> Guesses Remaining:</div>
        <div id="guessesRemaining"> 10 </div>
   
        <div>Your Guesses:</div>    
        <div id="guessedLetters">????</div>
    
  </div>

<script src="assets/javascript/game.js"></script>

</body>

</html>

<script>
    //define variables for game play
var winCount = 0;
var lossCount = 0;
var guessesRemaining = 10;
var guessedLetters = [];


// set up array 
var alphabet =
    ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q"
    ,"r","s","t","u","v","w","x","y","z"];

// add a listener for the user to press a key
document.onkeyup = function(event) {
  var userChoice = event.key;

var randomIndex = Math.floor(Math.random() * alphabet.length);
var computerChoice = alphabet[randomIndex];
  // make sure the user selects a value a-z
  
    // reset computer choice if the user loses
    if (guessesRemaining <= -1) {
      lossCount++;
      guessesRemaining = 10;
      guessedLetters = [];
  
      randomIndex = Math.floor(Math.random() * alphabet.length);
      computerChoice = alphabet[randomIndex];
      
      console.log("You lost!");
      alert("You lost!");
      
      document.getElementById("lossCount").innerHTML = lossCount++;
      document.getElementById("guessedLetters").innerHTML = guessedLetters;
      document.getElementById("guessesRemaining").innerHTML = 10;
      
    }
    // compares the randomly selected computer choice and user choice
    if (computerChoice === userChoice) {
       
      console.log("You won!");
      console.log(computerChoice);
     
      
      guessedLetters = [];
      guessesRemaining = 10;
      randomIndex = Math.floor(Math.random() * alphabet.length);
      computerChoice = alphabet[randomIndex];
      
   
      document.getElementById("winCount").innerHTML = winCount++;
      document.getElementById("guessedLetters").innerHTML = guessedLetters;
      document.getElementById("guessesRemaining").innerHTML = 10;
      computerChoiceText = document.getElementById("computerchoice-text");
      alert("You won!");
    } else {

      guessedLetters.push(userChoice);
      console.log("Guess again!");
      document.getElementById("guessesRemaining").innerHTML = guessesRemaining--;
      document.getElementById("guessedLetters").innerHTML = guessedLetters;
      document.getElementById("computerchoice-text").innerHTML = computerChoice;
    }


}

</script>



<!-- 
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Number guessing game</title>

    <style>
      html {
        font-family: sans-serif;
      }
      body {
        width: 50%;
        max-width: 800px;
        min-width: 480px;
        margin: 0 auto;
      }
      .lastResult {
        color: white;
        padding: 3px;
      }
    </style>
  </head>

  <body>
    <h1>Number guessing game</h1>

    <p>We have selected a random number between 1 and 100. See if you can guess it in 10 turns or fewer. We'll tell you if your guess was too high or too low.</p>

    <div class="form">
      <label for="guessField">Enter a guess: </label><input type="text" id="guessField" class="guessField">
      <input type="submit" value="Submit guess" class="guessSubmit">
    </div>

    <div class="resultParas">
      <p class="guesses"></p>
      <p class="lastResult"></p>
      <p class="lowOrHi"></p>
    </div>

    <script>
      let randomNumber = Math.floor(Math.random() * 100) + 1;
      const guesses = document.querySelector('.guesses');
      const lastResult = document.querySelector('.lastResult');
      const lowOrHi = document.querySelector('.lowOrHi');
      const guessSubmit = document.querySelector('.guessSubmit');
      const guessField = document.querySelector('.guessField');
      let guessCount = 1;
      let resetButton;
      function checkGuess() {
        let userGuess = Number(guessField.value);
        if (guessCount === 1) {
          guesses.textContent = 'Previous guesses: ';
        }
        guesses.textContent += userGuess + ' ';
        if (userGuess === randomNumber) {
          lastResult.textContent = 'Congratulations! You got it right!';
          lastResult.style.backgroundColor = 'green';
          lowOrHi.textContent = '';
          setGameOver();
        } else if (guessCount === 10) {
          lastResult.textContent = '!!!GAME OVER!!!';
          lowOrHi.textContent = '';
          setGameOver();
        } else {
          lastResult.textContent = 'Wrong!';
          lastResult.style.backgroundColor = 'red';
          if(userGuess < randomNumber) {
            lowOrHi.textContent = 'Last guess was too low!' ;
          } else if(userGuess > randomNumber) {
            lowOrHi.textContent = 'Last guess was too high!';
          }
        }
        guessCount++;
        guessField.value = '';
        guessField.focus();
      }
      guessSubmit.addEventListener('click', checkGuess);
      function setGameOver() {
        guessField.disabled = true;
        guessSubmit.disabled = true;
        resetButton = document.createElement('button');
        resetButton.textContent = 'Start new game';
        document.body.appendChild(resetButton);
        resetButton.addEventListener('click', resetGame);
      }
      function resetGame() {
        guessCount = 1;
        const resetParas = document.querySelectorAll('.resultParas p');
        for(let i = 0 ; i < resetParas.length ; i++) {
          resetParas[i].textContent = '';
        }
        resetButton.parentNode.removeChild(resetButton);
        guessField.disabled = false;
        guessSubmit.disabled = false;
        guessField.value = '';
        guessField.focus();
        lastResult.style.backgroundColor = 'white';
        randomNumber = Math.floor(Math.random() * 100) + 1;
      }
    </script>
  </body>
</html> -->






<!-- <style>
.hidden {
    display: none;
  }


</style>

<div id="main">
    <h1>Hangman</h1>
    <div id="start">
      <button id="btnStart">Start</button>
    </div>
    <div id="gameBoard" class="hidden">
      <h1>Guess the Word</h1>
      <div id="wordBoard"></div>
      Guessed Letters:
      <div id="guessedLetters"></div>
      <div id="gameStatus"></div>
    </div>
    <div id="playAgain" class="hidden">
      <button id="btnPlayAgain">Play Again?</button>
    </div>
  </div>


  <script>
  $(() => {
  const appData = {
    words: ['Chopper', 'Dot', 'Carl'],
    guessLimit: 8,
  };

  let appState = {};
  
  const initAppState = () => {
    const randomWordIndex = Math.floor(Math.random() * appData.words.length);
    const word = appData.words[randomWordIndex];
    const wordBoard = Array(word.length).fill('_');
    appState = {
      currentWord: randomWordIndex,
      guessedLetters: [],
      remainingGuesses: appData.guessLimit,
      wordBoard: wordBoard,
    };
  };
  
  const isLoser = () => {
    return appState.remainingGuesses === 0;
  }
  
  const isWinner = () => {
    return !appState.wordBoard.includes('_');
  }
  
  const renderWordBoard = () => {
    $('#wordBoard').text(appState.wordBoard.join(' '));
  }
  
  const renderGuessedLetters = () => {
    const upperCaseWord = appData.words[appState.currentWord].toUpperCase();
    let incorrectlyGuessedLetters = appState.guessedLetters.filter(letter => !upperCaseWord.includes(letter));
    $('#guessedLetters').text(incorrectlyGuessedLetters.join(', '));
  }
  
  const renderStatus = () => {
    if(isLoser()){
      $('#gameStatus').text('You loose!!!');
      $('#playAgain').show();
    } else if(isWinner()){
      $('#gameStatus').text('You Win!!!');
      $('#playAgain').show();
    } else {
      $('#gameStatus').text(`Remaining Guesses: ${appState.remainingGuesses}`);
    }
  }

  const guess = (letter) => {
    const word = appData.words[appState.currentWord];
    appState.guessedLetters.push(letter);
    
    let correctGuess = false;
    for(let i = 0; i < word.length; i++){
      const wordLetter = word.charAt(i);
      if(wordLetter.toUpperCase() === letter){
        appState.wordBoard[i] = wordLetter;
        correctGuess = true;
      }
    }
    
    if(!correctGuess){
      appState.remainingGuesses--;
    }
    
    renderStatus();
    renderWordBoard();
    renderGuessedLetters();
  }
  
  const isLetterKeyCode = (keyCode) => {
    return (keyCode >= 65 && keyCode <= 90)
  };

  const handleKeyDown = (event) => {
    const keyCode = event.keyCode;
    const key = String.fromCharCode(keyCode);

    if (appState.guessedLetters.includes(key) || !isLetterKeyCode(keyCode) || isLoser() || isWinner()) {
      return;
    }
    guess(key);
  };
  
  const startGame = () => {
    initAppState();
    renderStatus();
    renderWordBoard();
  };
  
  const handleStart = () => {
    $('#start').hide();
    $('#gameBoard').show();
    startGame();
  };
  
  const handlePlayAgain = () => {
    $('#playAgain').hide();
    startGame();
  };

  const initApp = () => {
    document.onkeydown = handleKeyDown;
    $('#btnStart').on('click', handleStart);
    $('#btnPlayAgain').on('click', handlePlayAgain)
  };
  
  initApp();
});

  
  </script> -->



<!-- <html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="css/css.css">
</head>
<body>
  <div id="info">
    <h1>Hangman</h1>
    <p id="instuctions">Can you guess the word in 10 tries?</p>
    <p id="display"></p>
    <p id="displayTries"></p>
    <p id="displayProgress"></p>
  </div>
  <div id="btnSub">
    <input type="text" maxlength="1" id="userInput" disabled/>
    <input type="button" value="Start Game" id="button" onclick="startGame()">
  </div>
  <div id="results">
    <p id= "error"></p>
    <p id="mGuessesHeader"></p>
    <p id="mGuesses"></p>
  </div>
  <script src="js/game2.js"></script>
</body>
</html>


<script>

    /*
TODO: Create array of answers, one of which is randomly selected each game.
TODO: Create reg ex to not allow numbers, spaces or punctuation to be guessed.
TODO: Style game with CSS.
*/
let answer = "programming";
let tries = 10;
let correctGuesses = [];
let missedGuesses = [];
let progress = "";
let userGuess;
let attempts = -1;
let mGuesses = document.getElementById("mGuesses");
let gameStatus = document.getElementById("instuctions");
let inputForm = document.getElementById("userInput");
let answerStatus = document.getElementById("error");
// Show and update progress
function showProgress(){
while(progress.length != answer.length){
  progress += "-";
}
let splitAnswer = progress.split("");
for(var i = 0; i < answer.length; i++){
  if(answer.charAt(i) === userGuess){
    splitAnswer[i] = userGuess;
  }
}
progress = splitAnswer.join("");
return progress;
}
// Check player guess, display guess results to player
function checkGuess(userGuess){
  if(missedGuesses.includes(userGuess) || correctGuesses.includes(userGuess)){
    answerStatus.innerHTML = ("<span>You have already guessed the letter: </span>" +
                              userGuess.toUpperCase()  +
                              "<p>Please try again!</p>");
  }
  if(!(answer.includes(userGuess)) && !(missedGuesses.includes(userGuess))){
    missedGuesses.push(userGuess);
    mGuesses.innerHTML = missedGuesses.toString().toUpperCase();
    answerStatus.innerHTML = ("Wrong answer");
    tries--;
  } else if(answer.includes(userGuess) && !(correctGuesses.includes(userGuess))){
    correctGuesses.push(userGuess);
//     Ensure clicking 'start game' doesn't print 'correct' to page
    if(attempts !== -1){
      answerStatus.innerHTML = ("Correct!");
    }
    attempts++;
  }
}
// Start game, check for win or loss
function startGame(){
answerStatus.innerHTML = " ";
mGuessesHeader.innerHTML = ("Missed guesses:")
if(document.getElementById("button").value !== "Submit"){
  reset = document.getElementById("button");
  reset.value = "Submit";
}
if (inputForm.disabled === true){
    inputForm.disabled = false;
}
guess = document.getElementById("userInput").value.toLowerCase();
userGuess = guess;
userInput.value = "";
checkGuess(userGuess);
showProgress();
displayProgress.innerHTML = progress;
if(!progress.includes("-")){
  gameStatus.innerHTML = ("You won in " + attempts + " attempts with " + tries + " tries remaining!");
  let hide = document.getElementById("mGuessesHeader");
  hide.innerHTML = ("");
  answerStatus.innerHTML = ("");
  resetGame();
} else if (tries === 0){
  resetGame();
  gameStatus.innerHTML = ("Sorry, you lost!");
  answerStatus.innerHTML = ("");
  mGuessesHeader.innerHTML = ("");
} else {
  let display = document.getElementById("instuctions");
  display.innerHTML = "You have " + tries + " tries remaining";
  }
}
// Reset varibles for next game
function resetGame(){
tries = 10;
attempts = -1;
progress = "";
correctGuesses = [];
missedGuesses = [];
restart = document.getElementById("button");
restart.value = "Replay?";
mGuesses.innerHTML = ("");
disableForm();
}
// Disable form at end of game
function disableForm(){
if (inputForm.disabled === false){
  inputForm.disabled = true;
}
}

</script>
 -->
